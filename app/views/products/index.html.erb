<div class="container">
  <%= turbo_stream_from "products_list" %>
  <h1 class="d-flex justify-content-center">products</h1>
  <%= form_with(url: products_path, method: "GET", data: { controller: "form-submission", turbo_frame: "products", turbo_action: "advance" }) do |form| %>
    <div class="input-group m-2 ">
      <div class="form-group">
        <label>Product</label>
        <div class="form-outline">
        <%= form.text_field :query, class:"form-control rounded",placeholder: "Search by name", data: { action: "input->form-submission#search" } %>
        </div>
      </div>
    </div>
  <% end %>

  <div class="mb-12">
    <%= link_to "New Product", new_product_path,class: "btn btn-primary", data: { turbo_frame: "modal" } %>
  </div>
  <%= turbo_frame_tag "modal" %>


  <%= render "products", products: @products %>

  <div id="products">
    <% @products.each do |product| %>
      <%#= render partial: "products/product", locals: { product: product} %>
    <% end %>
  </div>
</div>
